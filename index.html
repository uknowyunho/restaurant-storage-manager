<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Restaurant Storage Manager</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <div id="app">
        <header>
            <h1>ğŸ½ï¸ Restaurant Storage Manager</h1>
            <p>Manage your favorite restaurants</p>
        </header>

        <div class="container">
            <!-- Add Restaurant Form -->
            <div class="form-swipe-container">
                <div class="form-section">
                    <h2>{{ editingId ? 'Edit Restaurant' : 'Add New Restaurant' }}</h2>
                    <form @submit.prevent="saveRestaurant">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Restaurant Name *</label>
                            <input
                                type="text"
                                id="name"
                                v-model="form.name"
                                placeholder="Enter restaurant name"
                                required
                            >
                        </div>
                        <div class="form-group">
                            <label for="cuisine">Cuisine Type *</label>
                            <select
                                id="cuisine"
                                v-model="form.cuisine"
                                required
                            >
                                <option value="">Select cuisine type</option>
                                <option value="Chinese">ğŸ¥¡ Chinese</option>
                                <option value="Korean">ğŸœ Korean</option>
                                <option value="Western">ğŸ” Western</option>
                                <option value="Japanese">ğŸ± Japanese</option>
                                <option value="Other">ğŸ´ Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input
                                type="text"
                                id="address"
                                v-model="form.address"
                                placeholder="Enter address"
                            >
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input
                                type="text"
                                id="phone"
                                v-model="form.phone"
                                placeholder="Enter phone number"
                            >
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rating">Rating</label>
                            <select id="rating" v-model="form.rating">
                                <option value="">Select rating</option>
                                <option value="5">â­â­â­â­â­ (5 stars)</option>
                                <option value="4">â­â­â­â­ (4 stars)</option>
                                <option value="3">â­â­â­ (3 stars)</option>
                                <option value="2">â­â­ (2 stars)</option>
                                <option value="1">â­ (1 star)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="priceRange">Price Range</label>
                            <select id="priceRange" v-model="form.priceRange">
                                <option value="">Select price range</option>
                                <option value="$">$ (Budget)</option>
                                <option value="$$">$$ (Moderate)</option>
                                <option value="$$$">$$$ (Expensive)</option>
                                <option value="$$$$">$$$$ (Very Expensive)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="notes">Notes</label>
                        <textarea
                            id="notes"
                            v-model="form.notes"
                            placeholder="Add any notes or comments..."
                            rows="3"
                        ></textarea>
                    </div>

                    <div class="form-group">
                        <label>Restaurant Images (up to 5)</label>
                        <input
                            type="file"
                            id="image"
                            @change="handleImageUpload"
                            accept="image/*"
                            ref="imageInput"
                            multiple
                            style="display: none;"
                        >
                        <div class="images-container">
                            <div v-if="form.images.length < 5" class="image-upload-button" @click="triggerImageUpload">
                                <svg class="upload-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="24" height="24" rx="4" fill="#5B9FFF"/>
                                    <circle cx="16" cy="7" r="2" fill="white"/>
                                    <path d="M3 17L8 12L11 15L16 10L21 15V19C21 19.5523 20.5523 20 20 20H4C3.44772 20 3 19.5523 3 19V17Z" fill="white" fill-opacity="0.7"/>
                                </svg>
                                <span class="image-count">{{ form.images.length }}/5</span>
                            </div>
                            <div v-for="(image, index) in form.images" :key="index" class="image-preview">
                                <img :src="image" alt="Preview" @click="openLightbox(image)">
                                <button
                                    type="button"
                                    class="btn-remove-image"
                                    @click.stop="removeImage(index)"
                                >
                                    âœ•
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            {{ editingId ? 'Update Restaurant' : 'Add Restaurant' }}
                        </button>
                        <button
                            type="button"
                            class="btn btn-secondary"
                            @click="resetForm"
                            v-if="editingId"
                        >
                            Cancel
                        </button>
                    </div>
                </form>
                </div>
                <div class="form-section">
                    <h2>Statistics</h2>
                    <div class="stats-content">
                        <div class="stat-card">
                            <div class="stat-value">{{ restaurants.length }}</div>
                            <div class="stat-label">Total Restaurants</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">{{ getCuisineCount('Chinese') }}</div>
                            <div class="stat-label">ğŸ¥¡ Chinese</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">{{ getCuisineCount('Korean') }}</div>
                            <div class="stat-label">ğŸœ Korean</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">{{ getCuisineCount('Western') }}</div>
                            <div class="stat-label">ğŸ” Western</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">{{ getCuisineCount('Japanese') }}</div>
                            <div class="stat-label">ğŸ± Japanese</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">{{ getCuisineCount('Other') }}</div>
                            <div class="stat-label">ğŸ´ Other</div>
                        </div>
                    </div>
                </div>
                <div class="form-section">
                    <h2>Quick Info</h2>
                    <div class="quick-info-content">
                        <p><strong>Highest Rated:</strong> {{ getHighestRated() }}</p>
                        <p><strong>Most Expensive:</strong> {{ getMostExpensive() }}</p>
                        <p><strong>Budget Friendly:</strong> {{ getBudgetFriendly() }}</p>
                    </div>
                </div>
            </div>

            <!-- Restaurant List -->
            <div class="list-section">
                <div class="list-header">
                    <h2>Your Restaurants ({{ restaurants.length }})</h2>
                    <div class="search-box">
                        <input
                            type="text"
                            v-model="searchQuery"
                            placeholder="Search restaurants..."
                        >
                    </div>
                </div>

                <div class="cuisine-filters">
                    <button
                        class="cuisine-filter-btn"
                        :class="{ active: selectedCuisine === 'Chinese' }"
                        @click="filterByCuisine('Chinese')"
                    >
                        ğŸ¥¡ Chinese
                    </button>
                    <button
                        class="cuisine-filter-btn"
                        :class="{ active: selectedCuisine === 'Korean' }"
                        @click="filterByCuisine('Korean')"
                    >
                        ğŸœ Korean
                    </button>
                    <button
                        class="cuisine-filter-btn"
                        :class="{ active: selectedCuisine === 'Western' }"
                        @click="filterByCuisine('Western')"
                    >
                        ğŸ” Western
                    </button>
                    <button
                        class="cuisine-filter-btn"
                        :class="{ active: selectedCuisine === 'Japanese' }"
                        @click="filterByCuisine('Japanese')"
                    >
                        ğŸ± Japanese
                    </button>
                    <button
                        class="cuisine-filter-btn"
                        :class="{ active: selectedCuisine === 'Other' }"
                        @click="filterByCuisine('Other')"
                    >
                        ğŸ´ Other
                    </button>
                </div>

                <div v-if="filteredRestaurants.length === 0" class="empty-state">
                    <p v-if="searchQuery">No restaurants found for "{{ searchQuery }}"</p>
                    <p v-else-if="!selectedCuisine">Please select a category above or use search to view restaurants</p>
                    <p v-else>No {{ selectedCuisine }} restaurants found. Add one above!</p>
                </div>

                <div class="restaurant-grid" :class="{ 'list-view': selectedCuisine || searchQuery }">
                    <div
                        v-for="restaurant in filteredRestaurants"
                        :key="restaurant.id"
                        class="restaurant-card"
                        @click="editRestaurant(restaurant)"
                    >
                        <div v-if="restaurant.images && restaurant.images.length > 0" class="card-images-gallery">
                            <div v-for="(image, index) in restaurant.images" :key="index" class="card-image">
                                <img :src="image" :alt="restaurant.name" @click.stop="openLightbox(image)" style="cursor: pointer;">
                            </div>
                        </div>

                        <div class="card-content">
                            <div class="card-header">
                                <h3>{{ restaurant.name }}</h3>
                                <span class="cuisine-badge">{{ restaurant.cuisine }}</span>
                            </div>

                            <div class="card-body">
                                <div class="info-row" v-if="restaurant.address">
                                    <span class="icon">ğŸ“</span>
                                    <span>{{ restaurant.address }}</span>
                                </div>
                                <div class="info-row" v-if="restaurant.phone">
                                    <span class="icon">ğŸ“</span>
                                    <span>{{ restaurant.phone }}</span>
                                </div>
                                <div class="info-row" v-if="restaurant.rating">
                                    <span class="icon">â­</span>
                                    <span>{{ getStars(restaurant.rating) }} ({{ restaurant.rating }}/5)</span>
                                </div>
                                <div class="info-row" v-if="restaurant.priceRange">
                                    <span class="icon">ğŸ’°</span>
                                    <span>{{ restaurant.priceRange }}</span>
                                </div>
                                <div class="info-row" v-if="restaurant.notes">
                                    <span class="icon">ğŸ“</span>
                                    <span>{{ restaurant.notes }}</span>
                                </div>
                            </div>

                            <div class="card-actions">
                                <button
                                    class="btn btn-small btn-edit"
                                    @click.stop="editRestaurant(restaurant)"
                                >
                                    Edit
                                </button>
                                <button
                                    class="btn btn-small btn-delete"
                                    @click.stop="deleteRestaurant(restaurant.id)"
                                >
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Image Lightbox Modal -->
        <div v-if="showLightbox" class="image-lightbox" @click="closeLightbox">
            <button class="lightbox-close" @click="closeLightbox">âœ•</button>
            <img :src="lightboxImage" alt="Enlarged view" @click.stop>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
